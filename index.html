<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TKA SMA ABBS Surakarta</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');
        * { font-family: 'Poppins', sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .gradient-text { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .link-card { transition: all 0.3s ease; }
        .link-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
        .pulse-dot { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .badge-animate { animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        .blob { position: fixed; opacity: 0.1; filter: blur(40px); z-index: -1; }
        .blob1 { width: 300px; height: 300px; background: #667eea; top: -100px; left: -100px; animation: blobMove 15s infinite; }
        .blob2 { width: 400px; height: 400px; background: #764ba2; bottom: -150px; right: -100px; animation: blobMove 20s infinite reverse; }
        @keyframes blobMove { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(50px, 50px); } }
        .logo-container { padding: 0.75rem; }
        .logo-image { max-width: 100%; height: auto; object-fit: contain; }

        /* === Gaya untuk Loading Overlay === */
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        /* === Gaya untuk menyembunyikan dan transisi konten === */
        #main-content {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <div id="loading-overlay">
        <div class="spinner"></div>
    </div>

    <div class="blob blob1"></div>
    <div class="blob blob2"></div>

    <div class="min-h-screen flex items-center justify-center p-4 py-20">
        <div id="main-content" class="w-full max-w-md">
            <div class="text-center mb-12">
                <div class="mb-6 inline-block badge-animate">
                    <div class="w-24 h-24 mx-auto rounded-full bg-gradient-to-br from-purple-400 to-pink-300 p-1 shadow-xl">
                        <div id="header-content-wrapper" class="w-full h-full rounded-full bg-white flex items-center justify-center"></div>
                    </div>
                </div>
                <h1 id="main-title" class="text-4xl font-bold text-white mb-2"></h1>
                <p id="subtitle" class="text-purple-200 text-lg mb-1"></p>
                <p id="location" class="text-purple-100 text-sm flex items-center justify-center gap-1">
                    <i class="fas fa-map-marker-alt"></i>
                    <span></span>
                </p>
                <div class="mt-4 flex items-center justify-center gap-2">
                    <span id="status-badge" class="inline-flex items-center gap-2 bg-white/20 text-white px-3 py-1 rounded-full text-sm backdrop-blur-sm">
                        <span class="w-2 h-2 bg-green-400 rounded-full pulse-dot"></span>
                        <span></span>
                    </span>
                </div>
            </div>

            <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 mb-8 border border-white/20">
                <p id="description" class="text-white text-center text-sm leading-relaxed"></p>
            </div>

            <div id="links-container" class="space-y-4 mb-8"></div>

            <div class="text-center text-white/60 text-xs">
                <p id="footer-copyright"></p>
                <p id="footer-tagline" class="mt-1"></p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const API_URL = "https://script.google.com/macros/s/AKfycby7uwklyo8s2g7r4f8ZfOaIjB4vzUJQjUTs90TM5mp5yrwFaZDBEPkIMDbj8ZEel-k-/exec";

            const loadingOverlay = document.getElementById('loading-overlay');
            const mainContent = document.getElementById('main-content');

            fetch(API_URL)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    renderConfig(data.config);
                    renderLinks(data.links);
                    renderSocials(data.social_links);
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                    mainContent.innerHTML = `<div class="text-center text-white bg-red-500/50 p-4 rounded-xl">
                                                <h3 class="font-bold text-lg">Oops! Terjadi Kesalahan</h3>
                                                <p class="text-sm">Gagal memuat data. Silakan coba muat ulang halaman atau periksa kembali URL API Anda.</p>
                                             </div>`;
                })
                .finally(() => {
                    // Sembunyikan loading overlay
                    loadingOverlay.style.opacity = '0';
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                    }, 500); // Tunggu transisi selesai sebelum menghilangkan elemen

                    // Tampilkan konten utama
                    mainContent.style.visibility = 'visible';
                    mainContent.style.opacity = '1';
                });
        });

        function renderConfig(config) {
            const headerWrapper = document.getElementById('header-content-wrapper');
            if (config.logo_url && config.logo_url.trim() !== '') {
                headerWrapper.innerHTML = `<div class="logo-container"><img src="${config.logo_url}" alt="Logo" class="logo-image"></div>`;
                headerWrapper.classList.remove('text-5xl');
            } else {
                headerWrapper.innerHTML = `<i class="${config.icon_header} gradient-text"></i>`;
                headerWrapper.classList.add('text-5xl');
            }
            document.title = config.main_title + ' - ' + config.location;
            document.getElementById('main-title').innerText = config.main_title || 'Judul Utama';
            document.getElementById('subtitle').innerText = config.subtitle || 'Subjudul';
            document.querySelector('#location span').innerText = config.location || 'Lokasi';
            document.querySelector('#status-badge span:last-child').innerText = config.status_text || 'Status';
            document.getElementById('description').innerText = config.description || 'Deskripsi singkat.';
            document.getElementById('social-title').innerText = config.social_title || 'Sosial Media';
            document.getElementById('footer-copyright').innerText = config.footer_copyright || 'Â© 2025';
            document.getElementById('footer-tagline').innerText = config.footer_tagline || 'Tagline';
        }

        function renderLinks(links) {
            const container = document.getElementById('links-container');
            container.innerHTML = '';
            links.forEach(link => {
                const card = `
                <a href="${link.url}" target="_blank" class="link-card block rounded-2xl p-5 shadow-lg hover:shadow-2xl text-white" style="background: linear-gradient(to right, ${link.gradient_from}, ${link.gradient_to});">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center text-xl backdrop-blur-sm">
                            <i class="${link.icon_class}"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">${link.title}</h3>
                            <p class="text-sm text-white/80">${link.subtitle}</p>
                        </div>
                        <i class="fas fa-chevron-right ml-auto"></i>
                    </div>
                </a>`;
                container.innerHTML += card;
            });
        }

        function renderSocials(socials) {
            const container = document.getElementById('socials-container');
            container.innerHTML = '';
            socials.forEach(social => {
                const socialLink = `
                <a href="${social.url}" target="_blank" class="w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center text-white transition">
                    <i class="${social.icon_class}"></i>
                </a>`;
                container.innerHTML += socialLink;
            });
        }
    </script>
</body>
</html>
